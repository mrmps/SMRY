@import "tailwindcss";
@plugin "@tailwindcss/typography";
@source "node_modules/streamdown/dist/*.js";

/*
 * Multi-theme support
 * Themes: light, pure-light, dark, magic-blue, classic-dark
 */
@custom-variant dark (&:is(.dark *, .magic-blue *, .classic-dark *, .carbon *, .black *, .forest *));

@theme inline {
  /* Core semantic colors */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Surface elevation system */
  --color-surface-1: var(--surface-1);
  --color-surface-2: var(--surface-2);
  --color-surface-3: var(--surface-3);

  /* Text hierarchy */
  --color-foreground-muted: var(--foreground-muted);
  --color-foreground-faint: var(--foreground-faint);

  /* Semantic status colors */
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);
  --color-info: var(--info);
  --color-info-foreground: var(--info-foreground);

  /* Accent color */
  --color-glow: var(--glow);
  --color-glow-muted: var(--glow-muted);

  /* Link colors */
  --color-link: var(--link-color);
  --color-link-underline: var(--link-underline);

  /* Article text colors */
  --color-article-text: var(--article-text);
  --color-article-text-muted: var(--article-text-muted);

  /* Chart colors */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* Sidebar system */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Typography */
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);

  /* Radius system */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/*
 * =============================================================================
 * THEME: Light (default) - "Warm Paper"
 * Inspired by Kindle Paperwhite sepia mode and Substack
 * Soft cream background with warm brown-black text for extended reading
 * =============================================================================
 */
/* =============================================================================
 * READER TYPOGRAPHY CSS VARIABLES
 * These can be overridden by JavaScript for user preferences
 * ============================================================================= */
:root {
  --reader-font-family: var(--font-literata), Georgia, serif;
  --reader-font-size: 18px;
  --reader-line-height: 1.8;
  --reader-content-width: 740px;
}

:root,
.light {
  --radius: 0.625rem;

  /* Base - Warm cream like quality book paper */
  --background: #faf6f1;
  --foreground: #37352f;

  /* Text hierarchy - Warm sepia tones */
  --foreground-muted: #6b6458;
  --foreground-faint: #9b9488;

  /* Surfaces - Warm off-whites */
  --surface-1: #f4f0eb;
  --surface-2: #eeeae5;
  --surface-3: #e5e1dc;

  /* Card & Popover - Subtle warmth */
  --card: #fdfbf8;
  --card-foreground: #37352f;
  --popover: #fdfbf8;
  --popover-foreground: #37352f;

  /* Primary */
  --primary: #37352f;
  --primary-foreground: #faf6f1;

  /* Secondary */
  --secondary: #eeeae5;
  --secondary-foreground: #37352f;

  /* Muted */
  --muted: #eeeae5;
  --muted-foreground: #6b6458;

  /* Accent */
  --accent: #e5e1dc;
  --accent-foreground: #37352f;

  /* Destructive */
  --destructive: #e5484d;
  --destructive-foreground: #ffffff;

  /* Borders & inputs - Warm border */
  --border: #ddd9d4;
  --input: #ddd9d4;
  --ring: #6366f1;

  /* Accent glow - Indigo accent */
  --glow: #6366f1;
  --glow-muted: #8b93db;

  /* Link colors - Same as text, distinguished by underline only */
  --link-color: #37352f;
  --link-underline: rgba(55, 53, 47, 0.4);

  /* Article-specific text - slightly softer for extended reading */
  --article-text: #3d3a33;
  --article-text-muted: #5c5850;

  /* Status colors */
  --success: #30a46c;
  --success-foreground: #ffffff;
  --warning: #f5a623;
  --warning-foreground: #37352f;
  --info: #0091ff;
  --info-foreground: #ffffff;

  /* Charts */
  --chart-1: #6366f1;
  --chart-2: #30a46c;
  --chart-3: #e5484d;
  --chart-4: #f5a623;
  --chart-5: #0091ff;

  /* Sidebar - Darker shade for depth contrast in light mode */
  --sidebar: #ebe7e2;
  --sidebar-foreground: #37352f;
  --sidebar-primary: #37352f;
  --sidebar-primary-foreground: #faf6f1;
  --sidebar-accent: #ddd9d4;
  --sidebar-accent-foreground: #37352f;
  --sidebar-border: #d4d0cb;
  --sidebar-ring: #6366f1;
}

/*
 * =============================================================================
 * THEME: Pure Light
 * Pure white - minimal, clean, bright
 * Softened text (#171717) for reduced harshness
 * =============================================================================
 */
.pure-light {
  --background: #ffffff;
  --foreground: #171717;

  --foreground-muted: #666666;
  --foreground-faint: #999999;

  --surface-1: #fafafa;
  --surface-2: #f5f5f5;
  --surface-3: #eeeeee;

  --card: #ffffff;
  --card-foreground: #171717;
  --popover: #ffffff;
  --popover-foreground: #171717;

  --primary: #171717;
  --primary-foreground: #ffffff;

  --secondary: #f5f5f5;
  --secondary-foreground: #171717;

  --muted: #f5f5f5;
  --muted-foreground: #666666;

  --accent: #eeeeee;
  --accent-foreground: #171717;

  --destructive: #dc2626;
  --destructive-foreground: #ffffff;

  --border: #e0e0e0;
  --input: #e0e0e0;
  --ring: #6366f1;

  --glow: #6366f1;
  --glow-muted: #a5b4fc;

  /* Link colors - Same as text, distinguished by underline only */
  --link-color: #171717;
  --link-underline: rgba(23, 23, 23, 0.4);

  /* Article-specific text */
  --article-text: #2a2a2a;
  --article-text-muted: #555555;

  /* Sidebar - Slightly darker for depth in pure-light */
  --sidebar: #f0f0f0;
  --sidebar-foreground: #171717;
  --sidebar-primary: #171717;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: #e5e5e5;
  --sidebar-accent-foreground: #171717;
  --sidebar-border: #d8d8d8;
  --sidebar-ring: #6366f1;
}

/*
 * =============================================================================
 * THEME: Dark (Default) - "Premium Reading"
 * Inspired by Readwise Reader's dark mode
 * - Background: Rich charcoal gray (not pure black) for comfortable reading
 * - Text: Warm cream/off-white for reduced eye strain
 * - Surfaces: Layered depth for visual hierarchy
 * =============================================================================
 */
.dark {
  --background: #1c1e21;
  --foreground: #d4d2cf;

  --foreground-muted: #9a9895;
  --foreground-faint: #6a6866;

  /* Layered surfaces for depth */
  --surface-1: #17191c;
  --surface-2: #232528;
  --surface-3: #2d3033;

  --card: #1f2124;
  --card-foreground: #d4d2cf;
  --popover: #232528;
  --popover-foreground: #d4d2cf;

  --primary: #d4d2cf;
  --primary-foreground: #1c1e21;

  --secondary: #2d3033;
  --secondary-foreground: #d4d2cf;

  --muted: #232528;
  --muted-foreground: #9a9895;

  --accent: #2d3033;
  --accent-foreground: #d4d2cf;

  --destructive: #7f1d1d;
  --destructive-foreground: #fecaca;

  --border: #3a3d42;
  --input: #3a3d42;
  --ring: #52525b;

  --glow: #818cf8;
  --glow-muted: #6366f1;

  /* Link colors - Same as text, distinguished by underline only */
  --link-color: #d4d2cf;
  --link-underline: rgba(212, 210, 207, 0.35);

  /* Article text - Soft off-white for comfortable reading */
  --article-text: #d4d2cf;
  --article-text-muted: #9a9895;

  /* Sidebar - Same as background for clean OLED look */
  --sidebar: #1c1e21;
  --sidebar-foreground: #d4d2cf;
  --sidebar-primary: #7cb3f0;
  --sidebar-primary-foreground: #d4d2cf;
  --sidebar-accent: #27292e;
  --sidebar-accent-foreground: #d4d2cf;
  --sidebar-border: #2d3033;
  --sidebar-ring: #52525b;

  --success: #30a46c;
  --success-foreground: #0d0d0c;
  --warning: #f5a623;
  --warning-foreground: #0d0d0c;
  --info: #0091ff;
  --info-foreground: #0d0d0c;

  --chart-1: #3b82f6;
  --chart-2: #22c55e;
  --chart-3: #f59e0b;
  --chart-4: #a855f7;
  --chart-5: #f43f5e;
}

/*
 * =============================================================================
 * THEME: Magic Blue
 * Dark with subtle blue tint - Linear's signature look
 * Premium reading with warm cream text
 * =============================================================================
 */
.magic-blue {
  --background: #13151a;
  --foreground: #d4d2cf;

  --foreground-muted: #9a9895;
  --foreground-faint: #6a6866;

  --surface-1: #0e1015;
  --surface-2: #1a1c22;
  --surface-3: #24262d;

  --card: #16181e;
  --card-foreground: #d4d2cf;
  --popover: #1a1c22;
  --popover-foreground: #d4d2cf;

  --primary: #d4d2cf;
  --primary-foreground: #13151a;

  --secondary: #24262d;
  --secondary-foreground: #d4d2cf;

  --muted: #1a1c22;
  --muted-foreground: #9a9895;

  --accent: #24262d;
  --accent-foreground: #d4d2cf;

  --destructive: #e5484d;
  --destructive-foreground: #ffffff;

  --border: #2e3038;
  --input: #2e3038;
  --ring: #575ac6;

  --glow: #575ac6;
  --glow-muted: #454899;

  /* Link colors */
  --link-color: #d4d2cf;
  --link-underline: rgba(212, 210, 207, 0.35);

  /* Article text - Soft off-white for comfortable reading */
  --article-text: #d4d2cf;
  --article-text-muted: #9a9895;

  /* Sidebar - Same as background for clean OLED look */
  --sidebar: #13151a;
  --sidebar-foreground: #d4d2cf;
  --sidebar-primary: #575ac6;
  --sidebar-primary-foreground: #d4d2cf;
  --sidebar-accent: #1e2128;
  --sidebar-accent-foreground: #d4d2cf;
  --sidebar-border: #252830;
  --sidebar-ring: #575ac6;

  --success: #30a46c;
  --success-foreground: #0a0c12;
  --warning: #f5a623;
  --warning-foreground: #0a0c12;
  --info: #0091ff;
  --info-foreground: #0a0c12;

  --chart-1: #575ac6;
  --chart-2: #30a46c;
  --chart-3: #e5484d;
  --chart-4: #f5a623;
  --chart-5: #0091ff;
}

/*
 * =============================================================================
 * THEME: Classic Dark
 * Neutral dark gray - no color tint, professional
 * Premium reading with warm cream text
 * =============================================================================
 */
.classic-dark {
  --background: #18191b;
  --foreground: #d4d2cf;

  --foreground-muted: #9a9895;
  --foreground-faint: #6a6866;

  --surface-1: #131415;
  --surface-2: #1e1f21;
  --surface-3: #282a2c;

  --card: #1c1d1f;
  --card-foreground: #d4d2cf;
  --popover: #1e1f21;
  --popover-foreground: #d4d2cf;

  --primary: #d4d2cf;
  --primary-foreground: #18191b;

  --secondary: #282a2c;
  --secondary-foreground: #d4d2cf;

  --muted: #1e1f21;
  --muted-foreground: #9a9895;

  --accent: #282a2c;
  --accent-foreground: #d4d2cf;

  --destructive: #e5484d;
  --destructive-foreground: #ffffff;

  --border: #363839;
  --input: #363839;
  --ring: #5e69d1;

  --glow: #5e69d1;
  --glow-muted: #4a52a8;

  /* Link colors */
  --link-color: #d4d2cf;
  --link-underline: rgba(212, 210, 207, 0.35);

  /* Article text - Soft off-white for comfortable reading */
  --article-text: #d4d2cf;
  --article-text-muted: #9a9895;

  /* Sidebar - Same as background for clean OLED look */
  --sidebar: #18191b;
  --sidebar-foreground: #d4d2cf;
  --sidebar-primary: #5e69d1;
  --sidebar-primary-foreground: #d4d2cf;
  --sidebar-accent: #232527;
  --sidebar-accent-foreground: #d4d2cf;
  --sidebar-border: #2a2c2e;
  --sidebar-ring: #5e69d1;

  --success: #30a46c;
  --success-foreground: #121314;
  --warning: #f5a623;
  --warning-foreground: #121314;
  --info: #0091ff;
  --info-foreground: #121314;

  --chart-1: #5e69d1;
  --chart-2: #30a46c;
  --chart-3: #e5484d;
  --chart-4: #f5a623;
  --chart-5: #0091ff;
}

/*
 * =============================================================================
 * THEME: Carbon
 * High contrast dark mode - maximum readability
 * =============================================================================
 */
.carbon {
  --background: #1c1e21;
  --foreground: #d4d2cf;

  --foreground-muted: #9a9895;
  --foreground-faint: #6a6866;

  /* Layered surfaces for depth */
  --surface-1: #17191c;
  --surface-2: #232528;
  --surface-3: #2d3033;

  --card: #1f2124;
  --card-foreground: #d4d2cf;
  --popover: #232528;
  --popover-foreground: #d4d2cf;

  --primary: #d4d2cf;
  --primary-foreground: #1c1e21;

  --secondary: #2d3033;
  --secondary-foreground: #d4d2cf;

  --muted: #232528;
  --muted-foreground: #9a9895;

  --accent: #2d3033;
  --accent-foreground: #d4d2cf;

  --destructive: #7f1d1d;
  --destructive-foreground: #fecaca;

  --border: #3a3d42;
  --input: #3a3d42;
  --ring: #52525b;

  --glow: #818cf8;
  --glow-muted: #6366f1;

  /* Link colors - Same as text, distinguished by underline only */
  --link-color: #d4d2cf;
  --link-underline: rgba(212, 210, 207, 0.35);

  /* Article text - Soft off-white for comfortable reading */
  --article-text: #d4d2cf;
  --article-text-muted: #9a9895;

  /* Sidebar - Same as background for clean look */
  --sidebar: #1c1e21;
  --sidebar-foreground: #d4d2cf;
  --sidebar-primary: #7cb3f0;
  --sidebar-primary-foreground: #d4d2cf;
  --sidebar-accent: #27292e;
  --sidebar-accent-foreground: #d4d2cf;
  --sidebar-border: #2d3033;
  --sidebar-ring: #52525b;

  --success: #30a46c;
  --success-foreground: #0d0d0c;
  --warning: #f5a623;
  --warning-foreground: #0d0d0c;
  --info: #0091ff;
  --info-foreground: #0d0d0c;

  --chart-1: #3b82f6;
  --chart-2: #22c55e;
  --chart-3: #f59e0b;
  --chart-4: #a855f7;
  --chart-5: #f43f5e;
}

/*
 * =============================================================================
 * THEME: Black (OLED)
 * True black for OLED displays - maximum battery savings
 * =============================================================================
 */
.black {
  --background: #000000;
  --foreground: #e0e0e0;

  --foreground-muted: #9a9a9a;
  --foreground-faint: #666666;

  --surface-1: #000000;
  --surface-2: #0a0a0a;
  --surface-3: #141414;

  --card: #050505;
  --card-foreground: #e0e0e0;
  --popover: #0a0a0a;
  --popover-foreground: #e0e0e0;

  --primary: #e0e0e0;
  --primary-foreground: #000000;

  --secondary: #141414;
  --secondary-foreground: #e0e0e0;

  --muted: #0a0a0a;
  --muted-foreground: #9a9a9a;

  --accent: #141414;
  --accent-foreground: #e0e0e0;

  --destructive: #dc2626;
  --destructive-foreground: #ffffff;

  --border: #1f1f1f;
  --input: #1f1f1f;
  --ring: #404040;

  --glow: #737373;
  --glow-muted: #525252;

  --link-color: #e0e0e0;
  --link-underline: rgba(224, 224, 224, 0.35);

  --article-text: #d4d4d4;
  --article-text-muted: #9a9a9a;

  --sidebar: #000000;
  --sidebar-foreground: #e0e0e0;
  --sidebar-primary: #737373;
  --sidebar-primary-foreground: #e0e0e0;
  --sidebar-accent: #0f0f0f;
  --sidebar-accent-foreground: #e0e0e0;
  --sidebar-border: #1a1a1a;
  --sidebar-ring: #404040;

  --success: #22c55e;
  --success-foreground: #000000;
  --warning: #eab308;
  --warning-foreground: #000000;
  --info: #3b82f6;
  --info-foreground: #000000;

  --chart-1: #737373;
  --chart-2: #22c55e;
  --chart-3: #dc2626;
  --chart-4: #eab308;
  --chart-5: #3b82f6;
}

/*
 * =============================================================================
 * THEME: Winter
 * Cool blue-tinted light theme - crisp and clean
 * =============================================================================
 */
.winter {
  --background: #f8fafc;
  --foreground: #1e293b;

  --foreground-muted: #64748b;
  --foreground-faint: #94a3b8;

  --surface-1: #f1f5f9;
  --surface-2: #e2e8f0;
  --surface-3: #cbd5e1;

  --card: #ffffff;
  --card-foreground: #1e293b;
  --popover: #ffffff;
  --popover-foreground: #1e293b;

  --primary: #1e293b;
  --primary-foreground: #f8fafc;

  --secondary: #e2e8f0;
  --secondary-foreground: #1e293b;

  --muted: #e2e8f0;
  --muted-foreground: #64748b;

  --accent: #cbd5e1;
  --accent-foreground: #1e293b;

  --destructive: #dc2626;
  --destructive-foreground: #ffffff;

  --border: #cbd5e1;
  --input: #cbd5e1;
  --ring: #6366f1;

  --glow: #6366f1;
  --glow-muted: #a5b4fc;

  --link-color: #1e293b;
  --link-underline: rgba(30, 41, 59, 0.4);

  --article-text: #334155;
  --article-text-muted: #64748b;

  --sidebar: #e2e8f0;
  --sidebar-foreground: #1e293b;
  --sidebar-primary: #1e293b;
  --sidebar-primary-foreground: #f8fafc;
  --sidebar-accent: #cbd5e1;
  --sidebar-accent-foreground: #1e293b;
  --sidebar-border: #94a3b8;
  --sidebar-ring: #6366f1;

  --success: #22c55e;
  --success-foreground: #ffffff;
  --warning: #f59e0b;
  --warning-foreground: #1e293b;
  --info: #0ea5e9;
  --info-foreground: #ffffff;

  --chart-1: #6366f1;
  --chart-2: #22c55e;
  --chart-3: #ef4444;
  --chart-4: #f59e0b;
  --chart-5: #0ea5e9;
}

/*
 * =============================================================================
 * THEME: Forest
 * Dark green-tinted theme - natural and calming
 * =============================================================================
 */
.forest {
  --background: #0f1512;
  --foreground: #d4e6db;

  --foreground-muted: #9ab4a4;
  --foreground-faint: #6b8c79;

  --surface-1: #0a100d;
  --surface-2: #151d18;
  --surface-3: #1e2a23;

  --card: #121916;
  --card-foreground: #d4e6db;
  --popover: #151d18;
  --popover-foreground: #d4e6db;

  --primary: #d4e6db;
  --primary-foreground: #0f1512;

  --secondary: #1e2a23;
  --secondary-foreground: #d4e6db;

  --muted: #151d18;
  --muted-foreground: #9ab4a4;

  --accent: #1e2a23;
  --accent-foreground: #d4e6db;

  --destructive: #ef4444;
  --destructive-foreground: #ffffff;

  --border: #2a3d31;
  --input: #2a3d31;
  --ring: #4ade80;

  --glow: #4ade80;
  --glow-muted: #22c55e;

  --link-color: #d4e6db;
  --link-underline: rgba(212, 230, 219, 0.35);

  --article-text: #c8ddd0;
  --article-text-muted: #9ab4a4;

  --sidebar: #0f1512;
  --sidebar-foreground: #d4e6db;
  --sidebar-primary: #4ade80;
  --sidebar-primary-foreground: #d4e6db;
  --sidebar-accent: #1a241e;
  --sidebar-accent-foreground: #d4e6db;
  --sidebar-border: #253029;
  --sidebar-ring: #4ade80;

  --success: #4ade80;
  --success-foreground: #0f1512;
  --warning: #facc15;
  --warning-foreground: #0f1512;
  --info: #38bdf8;
  --info-foreground: #0f1512;

  --chart-1: #4ade80;
  --chart-2: #22c55e;
  --chart-3: #ef4444;
  --chart-4: #facc15;
  --chart-5: #38bdf8;
}

/*
 * =============================================================================
 * THEME: Dawn
 * Warm peachy/rose light theme - soft and gentle for morning reading
 * =============================================================================
 */
.dawn {
  --background: #fdf8f6;
  --foreground: #44403c;

  --foreground-muted: #78716c;
  --foreground-faint: #a8a29e;

  --surface-1: #faf5f3;
  --surface-2: #f5ebe8;
  --surface-3: #ede4e0;

  --card: #fffaf8;
  --card-foreground: #44403c;
  --popover: #fffaf8;
  --popover-foreground: #44403c;

  --primary: #44403c;
  --primary-foreground: #fdf8f6;

  --secondary: #f5ebe8;
  --secondary-foreground: #44403c;

  --muted: #f5ebe8;
  --muted-foreground: #78716c;

  --accent: #ede4e0;
  --accent-foreground: #44403c;

  --destructive: #e5484d;
  --destructive-foreground: #ffffff;

  --border: #e7ddd9;
  --input: #e7ddd9;
  --ring: #b45309;

  --glow: #d97706;
  --glow-muted: #fbbf24;

  --link-color: #44403c;
  --link-underline: rgba(68, 64, 60, 0.4);

  --article-text: #4a4541;
  --article-text-muted: #78716c;

  --sidebar: #f5ebe8;
  --sidebar-foreground: #44403c;
  --sidebar-primary: #44403c;
  --sidebar-primary-foreground: #fdf8f6;
  --sidebar-accent: #ede4e0;
  --sidebar-accent-foreground: #44403c;
  --sidebar-border: #e0d6d2;
  --sidebar-ring: #b45309;

  --success: #22c55e;
  --success-foreground: #ffffff;
  --warning: #f59e0b;
  --warning-foreground: #44403c;
  --info: #0ea5e9;
  --info-foreground: #ffffff;

  --chart-1: #d97706;
  --chart-2: #22c55e;
  --chart-3: #ef4444;
  --chart-4: #f59e0b;
  --chart-5: #0ea5e9;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  html {
    height: 100%;
    overflow: hidden;
  }

  body {
    @apply bg-background text-foreground;
    height: 100%;
    overflow-x: hidden;
    overflow-y: auto;
    overscroll-behavior-y: none;
  }
}

[data-vaul-no-drag] {
  touch-action: pan-y;
  -webkit-overflow-scrolling: touch;
}

/* =============================================================================
 * MOBILE SCROLLING IMPROVEMENTS
 * Smooth momentum scrolling for iOS, overscroll containment
 * ============================================================================= */
.scroll-container,
.scrollbar-hide {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Smooth scroll behavior for article navigation */
@media (prefers-reduced-motion: no-preference) {
  .article-container,
  .prose {
    scroll-behavior: smooth;
  }
}

@theme inline {
  --font-heading: var(--font-heading);
  --font-syne: var(--font-syne);
  --font-literata: var(--font-literata);
  --font-mono:
    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace;
}

@layer base {
  /* Custom scrollbar styling */
  pre::-webkit-scrollbar {
    width: 5px;
  }
  pre::-webkit-scrollbar-track {
    background: transparent;
  }
  pre::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 5px;
  }
  pre {
    scrollbar-width: thin;
    scrollbar-color: var(--border) transparent;
  }
}

@keyframes scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-100%);
  }
}

/* =============================================================================
 * PREMIUM SKELETON LOADING ANIMATION
 * Smooth shimmer effect with graceful timing
 * ============================================================================= */

.skeleton-shimmer {
  /* Base background - subtle surface color */
  background: linear-gradient(
    90deg,
    var(--foreground) 0%,
    var(--foreground) 40%,
    color-mix(in srgb, var(--foreground) 60%, var(--background)) 50%,
    var(--foreground) 60%,
    var(--foreground) 100%
  );
  background-size: 200% 100%;
  opacity: 0.08;
  animation: skeleton-shimmer 1.8s ease-in-out infinite;
}

/* Dark mode - slightly brighter for visibility */
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .skeleton-shimmer {
  opacity: 0.12;
}

@keyframes skeleton-shimmer {
  0% {
    background-position: 100% 0;
  }
  100% {
    background-position: -100% 0;
  }
}

/* Staggered animation delays for skeleton groups */
.skeleton-shimmer:nth-child(1) { animation-delay: 0ms; }
.skeleton-shimmer:nth-child(2) { animation-delay: 75ms; }
.skeleton-shimmer:nth-child(3) { animation-delay: 150ms; }
.skeleton-shimmer:nth-child(4) { animation-delay: 225ms; }
.skeleton-shimmer:nth-child(5) { animation-delay: 300ms; }
.skeleton-shimmer:nth-child(6) { animation-delay: 375ms; }

/* Article skeleton container - smooth entrance */
.article-skeleton-container {
  animation: skeleton-fade-in 400ms ease-out forwards;
}

/* Skeleton groups - staggered fade-in */
.skeleton-group {
  opacity: 0;
  animation: skeleton-group-enter 500ms ease-out forwards;
}

@keyframes skeleton-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes skeleton-group-enter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .skeleton-shimmer {
    animation: none;
    opacity: 0.1;
  }
  :is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .skeleton-shimmer {
    opacity: 0.15;
  }

  .article-skeleton-container,
  .skeleton-group {
    animation: none;
    opacity: 1;
    transform: none;
  }
}

/* Chat thinking indicator - shimmer text */
.thinking-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  height: 28px;
  padding: 4px 0;
}

.thinking-indicator svg {
  flex-shrink: 0;
  opacity: 0.4;
  color: var(--muted-foreground);
}

.thinking-text {
  font-size: 14px;
  line-height: 20px;
  color: var(--muted-foreground);
  background: linear-gradient(
    90deg,
    var(--muted-foreground) 0%,
    var(--foreground) 25%,
    var(--foreground) 50%,
    var(--muted-foreground) 75%,
    var(--muted-foreground) 100%
  );
  background-size: 200% 100%;
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: thinking-shimmer 2s ease-in-out infinite;
}

@keyframes thinking-shimmer {
  0% { background-position: 100% 0; }
  100% { background-position: -100% 0; }
}

/* =============================================================================
 * PREMIUM READING TYPOGRAPHY - OUTSIDE @layer for higher specificity
 * This MUST be outside @layer to override Tailwind Typography plugin defaults
 * ============================================================================= */

/* Article header - Uses reader content width */
.article-header {
  max-width: var(--reader-content-width, 740px);
}

/* Base prose - Uses reader preferences CSS variables */
.prose {
  /* Reader typography - customizable via CSS variables */
  font-family: var(--reader-font-family) !important;
  font-size: var(--reader-font-size) !important;
  line-height: var(--reader-line-height) !important;
  letter-spacing: 0.01em !important;
  color: var(--article-text, #37352f) !important;
  max-width: var(--reader-content-width) !important;
}

/* Prose text elements - Light mode */
.prose p,
.prose li,
.prose blockquote,
.prose td,
.prose th {
  color: var(--article-text, #37352f) !important;
}

/* Prose headings - Light mode */
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  color: var(--foreground, #1a1715) !important;
  font-weight: 600 !important;
  letter-spacing: -0.01em !important;
}

/* Prose links - Same color as text, distinguished by underline only */
.prose a:not(h1 a):not(h2 a):not(h3 a):not(h4 a):not(h5 a):not(h6 a) {
  color: var(--link-color) !important;
  text-decoration: underline !important;
  text-decoration-color: var(--link-underline) !important;
  text-decoration-thickness: 1px !important;
  text-underline-offset: 3px !important;
  transition: text-decoration-color 0.15s ease !important;
}

.prose a:hover {
  text-decoration-color: var(--link-color) !important;
}

/* Prose strong/bold */
.prose strong,
.prose b {
  color: var(--foreground, #1a1715) !important;
  font-weight: 600 !important;
}

/* Prose code */
.prose code {
  color: var(--foreground) !important;
  background: var(--surface-1) !important;
}

/* Prose blockquote */
.prose blockquote {
  border-left-color: var(--glow, #6366f1) !important;
  color: var(--foreground-muted) !important;
}

/* Dark mode prose overrides - using :is() for proper specificity */
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose {
  color: var(--foreground) !important;
}

:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose p,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose li,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose blockquote,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose td,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose th {
  color: var(--foreground) !important;
}

:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose h1,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose h2,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose h3,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose h4,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose h5,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose h6 {
  color: #e0dedb !important;
}

:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose a:not(h1 a):not(h2 a):not(h3 a):not(h4 a):not(h5 a):not(h6 a) {
  color: var(--link-color) !important;
  text-decoration-color: var(--link-underline) !important;
}

:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose strong,
:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose b {
  color: var(--foreground) !important;
}

:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose code {
  color: var(--foreground) !important;
  background: var(--surface-1) !important;
}

:is(.dark, .magic-blue, .classic-dark, .carbon, .black, .forest) .prose blockquote {
  border-left-color: var(--glow) !important;
  color: var(--foreground-muted) !important;
}

/* Headings inside links should use heading color */
.prose a h1, .prose a h2, .prose a h3, .prose a h4, .prose a h5, .prose a h6,
.prose h1 a, .prose h2 a, .prose h3 a, .prose h4 a, .prose h5 a, .prose h6 a {
  color: var(--foreground) !important;
  text-decoration: none !important;
}


/* =============================================================================
 * PROSE COMPONENT STYLES - In @layer for proper cascade
 * ============================================================================= */

@layer components {
  /* Paragraph spacing for readability */
  .prose p {
    margin-bottom: 1.5em;
  }

  /* Hide empty list items (bullets without text content) - comprehensive fix */
  .prose li:empty,
  .prose ul:empty,
  .prose ol:empty {
    display: none !important;
  }

  /* Hide list items that only contain empty child elements */
  .prose li:has(> :only-child:is(a, span, div, p):empty) {
    display: none !important;
  }

  /* Hide list items with only empty nested lists */
  .prose li:has(> ul:only-child:empty),
  .prose li:has(> ol:only-child:empty),
  .prose li:has(> ul:only-child:has(li:empty:only-child)),
  .prose li:has(> ol:only-child:has(li:empty:only-child)) {
    display: none !important;
  }

  /* Hide list items that have no visible text content (only whitespace) */
  .prose li:not(:has(img)):not(:has(video)):not(:has(iframe)):not(:has(svg)):not(:has(picture)) {
    &:has(> a:only-child:not([href*="http"])):has(> a:empty) {
      display: none !important;
    }
  }

  /* Hide list items that only contain whitespace or hidden elements */
  .prose li:has(> :only-child:is(script, style, noscript, template)) {
    display: none !important;
  }

  /* Remove all SVGs in article content */
  .prose svg {
    display: none !important;
  }

  /* Article images */
  .prose img {
    max-width: 100%;
    height: auto;
    width: auto;
    object-fit: contain;
    border-radius: 0.75rem;
    margin: 1.5rem 0;
    cursor: pointer;
  }

  /* Hide broken/placeholder images */
  .prose img[src=""],
  .prose img:not([src]),
  .prose img[alt^="Image"][alt$=":"] {
    display: none !important;
  }

  /* Small inline icon-like images — no lightbox */
  .prose img[width="16"],
  .prose img[width="20"],
  .prose img[width="24"],
  .prose img[height="16"],
  .prose img[height="20"],
  .prose img[height="24"] {
    display: inline-block;
    max-height: 1.5em;
    margin: 0 0.25em;
    vertical-align: middle;
    border-radius: 0;
    cursor: default;
  }

}

/* ── Image lightbox ─────────────────────────────────────────────────── */
.lightbox-overlay {
  position: fixed;
  inset: 0;
  z-index: 200;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  visibility: hidden;
  background: rgba(0, 0, 0, 0);
  backdrop-filter: blur(0px);
  -webkit-backdrop-filter: blur(0px);
  transition:
    background 0.3s cubic-bezier(0.2, 0, 0, 1),
    backdrop-filter 0.3s cubic-bezier(0.2, 0, 0, 1),
    -webkit-backdrop-filter 0.3s cubic-bezier(0.2, 0, 0, 1),
    visibility 0s 0.3s;
}

.lightbox-overlay[data-open] {
  visibility: visible;
  transition:
    background 0.3s cubic-bezier(0.2, 0, 0, 1),
    backdrop-filter 0.3s cubic-bezier(0.2, 0, 0, 1),
    -webkit-backdrop-filter 0.3s cubic-bezier(0.2, 0, 0, 1),
    visibility 0s;
}

.lightbox-overlay.lightbox-visible {
  pointer-events: auto;
  background: rgba(0, 0, 0, 0.92);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.lightbox-figure {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  max-width: 92vw;
  max-height: 92dvh;
  margin: 0;
  padding: 1rem;
  opacity: 0;
  transform: scale(0.96);
  transition:
    opacity 0.3s cubic-bezier(0.2, 0, 0, 1),
    transform 0.3s cubic-bezier(0.2, 0, 0, 1);
}

.lightbox-visible .lightbox-figure {
  opacity: 1;
  transform: scale(1);
}

.lightbox-img {
  max-width: 90vw;
  max-height: 82dvh;
  width: auto;
  height: auto;
  object-fit: contain;
  border-radius: 0.5rem;
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}

.lightbox-caption {
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.85rem;
  line-height: 1.5;
  text-align: center;
  max-width: 540px;
  padding: 0 1rem;
}

.lightbox-btn {
  position: absolute;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.8);
  cursor: pointer;
  opacity: 0;
  transition:
    opacity 0.3s ease,
    background 0.15s ease;
}

.lightbox-visible .lightbox-btn {
  opacity: 1;
}

.lightbox-btn:hover {
  background: rgba(255, 255, 255, 0.14);
  color: #fff;
}

.lightbox-close {
  top: 1rem;
  right: 1rem;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
}

.lightbox-prev,
.lightbox-next {
  top: 50%;
  translate: 0 -50%;
  width: 2.75rem;
  height: 2.75rem;
  border-radius: 50%;
}

.lightbox-prev {
  left: 0.75rem;
}

.lightbox-next {
  right: 0.75rem;
}

.lightbox-counter {
  position: absolute;
  top: 1.25rem;
  left: 50%;
  translate: -50% 0;
  font-size: 0.8rem;
  font-variant-numeric: tabular-nums;
  color: rgba(255, 255, 255, 0.4);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.lightbox-visible .lightbox-counter {
  opacity: 1;
}

@media (max-width: 640px) {
  .lightbox-img {
    max-width: 96vw;
    border-radius: 0.25rem;
  }

  .lightbox-prev,
  .lightbox-next {
    width: 2.25rem;
    height: 2.25rem;
  }

  .lightbox-prev {
    left: 0.5rem;
  }

  .lightbox-next {
    right: 0.5rem;
  }
}

@layer utilities {
  /* Surface elevation backgrounds */
  .bg-surface-1 {
    background-color: var(--surface-1);
  }

  .bg-surface-2 {
    background-color: var(--surface-2);
  }

  .bg-surface-3 {
    background-color: var(--surface-3);
  }

  /* Glow effects */
  .ring-glow {
    --tw-ring-color: var(--glow);
    --tw-ring-opacity: 0.4;
  }

  .shadow-glow-sm {
    box-shadow: 0 0 20px -5px var(--glow);
  }

  .shadow-glow-md {
    box-shadow: 0 0 40px -10px var(--glow);
  }

  /* Hide scrollbar while maintaining scroll functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* =============================================================================
 * P3 ACCENT COLORS
 * Wide gamut colors for modern displays with fallbacks
 * Fallbacks MUST come first so @supports can override them on P3 displays
 * ============================================================================= */

/* Fallback for non-P3 displays */
:root {
  --p3-emerald: #2dd4a0;
  --p3-gold: #fbbf24;
}

.dark, .magic-blue, .classic-dark, .carbon, .black, .forest {
  --p3-emerald: #34d399;
  --p3-gold: #fcd34d;
}

@supports (color: color(display-p3 1 1 1)) {
  :root {
    --p3-emerald: color(display-p3 0.18 0.78 0.52);
    --p3-gold: color(display-p3 1 0.82 0.35);
  }

  .dark, .magic-blue, .classic-dark, .carbon, .black, .forest {
    --p3-emerald: color(display-p3 0.2 0.85 0.5);
    --p3-gold: color(display-p3 1 0.85 0.4);
  }
}

/* RTL (Right-to-Left) language support */
@layer base {
  [dir="rtl"] {
    text-align: right;
  }

  [dir="ltr"] {
    text-align: left;
  }

  [dir="rtl"].prose,
  .prose[dir="rtl"] {
    text-align: right;
  }

  [dir="rtl"] blockquote,
  [dir="rtl"].prose blockquote {
    border-left: none;
    border-right: 4px solid var(--border);
    padding-left: 0;
    padding-right: 1rem;
  }

  [dir="rtl"] ol,
  [dir="rtl"] ul {
    padding-left: 0;
    padding-right: 1.5rem;
  }

  [dir="rtl"] pre {
    direction: ltr;
    text-align: left;
  }

  [dir="rtl"] code {
    direction: ltr;
  }
}

/* Custom Clerk Checkout Button Styling */
.checkout-btn-primary button,
.checkout-btn-secondary button {
  width: 100%;
  padding: 0.625rem 1rem;
  border-radius: 0.5rem;
  font-weight: 500;
  font-size: 0.875rem;
  transition: background-color 0.15s ease, opacity 0.15s ease;
}

.checkout-btn-primary button {
  background-color: var(--foreground);
  color: var(--background);
}

.checkout-btn-primary button:hover {
  opacity: 0.9;
}

.checkout-btn-secondary button {
  background-color: var(--accent);
  color: var(--foreground);
  border: 1px solid var(--border);
}

.checkout-btn-secondary button:hover {
  opacity: 0.8;
}

/* Clerk portal/sidebar positioning */
.cl-rootBox,
.cl-card,
.cl-modalContent,
.cl-drawer,
.cl-drawerContent,
[data-clerk-portal],
[data-clerk-component] {
  z-index: 9999 !important;
}

div[style*="position: fixed"][style*="inset: 0"] > div:last-child,
.cl-subscriptionDetails,
.cl-checkout {
  z-index: 9999 !important;
}

/* Minimal Tweet Card Styling */
.tweet-card-minimal {
  --tweet-bg-color: var(--card);
  --tweet-bg-color-hover: var(--accent);
  --tweet-border: 1px solid var(--border);
  --tweet-border-radius: 1rem;
  --tweet-font-family: inherit;
  --tweet-font-color: var(--foreground);
  --tweet-font-color-secondary: var(--muted-foreground);
  --tweet-link-color: var(--foreground);
  --tweet-link-color-hover: var(--muted-foreground);
}

.tweet-card-minimal [data-theme="light"],
.tweet-card-minimal [data-theme="dark"] {
  --tweet-bg-color: var(--card) !important;
  --tweet-border: 1px solid var(--border) !important;
  --tweet-font-color: var(--foreground) !important;
  --tweet-font-color-secondary: var(--muted-foreground) !important;
}

.tweet-card-minimal .react-tweet-theme {
  margin: 0 !important;
}

.tweet-card-minimal a[href*="twitter.com"][target="_blank"]:has(span),
.tweet-card-minimal [data-testid="tweet-link"] {
  display: none !important;
}

.tweet-card-minimal [role="group"],
.tweet-card-minimal .react-tweet-actions {
  display: none !important;
}

.tweet-card-minimal a[aria-label*="Copy"],
.tweet-card-minimal a[aria-label*="copy"],
.tweet-card-minimal button[aria-label*="Copy"],
.tweet-card-minimal div:has(> a[aria-label*="Copy"]) {
  display: none !important;
}

.tweet-card-minimal img[alt=""] {
  width: 40px !important;
  height: 40px !important;
}

.tweet-card-minimal > div {
  border-radius: 1rem !important;
  padding: 1.25rem !important;
  transition: all 0.2s ease;
}

.tweet-card-minimal > div:hover {
  background-color: var(--accent) !important;
}

.tweet-card-minimal svg[viewBox="0 0 24 24"]:has(path[d*="M18.244"]) {
  opacity: 0.3;
}

.tweet-card-minimal [data-testid="User-Name"] {
  gap: 0.25rem !important;
}

.tweet-card-minimal p {
  font-size: 0.9375rem !important;
  line-height: 1.5 !important;
}

.tweet-card-minimal [data-testid="reply"] {
  display: none !important;
}

.tweet-card-minimal time {
  color: var(--muted-foreground) !important;
}

/* =============================================================================
 * CHAT ANIMATIONS
 * Refined animations for AI chat interactions
 * ============================================================================= */

/* Message fade in animation - subtle like Perplexity */
@keyframes chat-message-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.chat-message-animate {
  animation: chat-message-in 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
}

/* Send button pulse on first message */
@keyframes chat-send-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 var(--glow);
  }
  50% {
    box-shadow: 0 0 0 8px transparent;
  }
}

.chat-send-pulse {
  animation: chat-send-pulse 1.5s ease-in-out infinite;
}

/* Slash command menu animation */
@keyframes slash-menu-in {
  from {
    opacity: 0;
    transform: translateY(4px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.slash-menu-animate {
  animation: slash-menu-in 0.15s ease-out;
}

/* Suggestion chip hover animation */
@keyframes suggestion-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* Input focus glow */
.chat-input-focus {
  transition: box-shadow 0.2s ease;
}

.chat-input-focus:focus-within {
  box-shadow: 0 0 0 2px var(--glow-muted);
}

/* Typing indicator animation */
@keyframes typing-bounce {
  0%, 60%, 100% {
    transform: translateY(0);
  }
  30% {
    transform: translateY(-4px);
  }
}

.typing-dot {
  animation: typing-bounce 1.2s ease-in-out infinite;
}

.typing-dot:nth-child(2) {
  animation-delay: 0.1s;
}

.typing-dot:nth-child(3) {
  animation-delay: 0.2s;
}

/* Get Pro button shimmer */
@keyframes shimmer {
  0% {
    background-position: 100% 50%;
  }
  50% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}
